- #### å‰è¨€

ä¹‹å‰çœ‹åˆ°ä¸€ä¸ªæœ‰æ„æ€çš„é¢˜ç›®ï¼Œç”±äºå¤ªæ‡’ï¼Œä¸€ç›´æ²¡æœ‰æ•´ç†ã€‚æœ€è¿‘ä¸æƒ³ç©æ¸¸æˆï¼ŒæŠ½ç©ºæ•´ç†ä¸€ä¸‹ï¼Œå°ç™½è‡ªå·±çæ•´æ´»å„¿ï¼Œæœ‰ä»€ä¹ˆè¯´çš„ä¸å¯¹çš„ï¼Œå¤§å®¶æƒ³å–·å°±å°±å–·å§ã€‚

é¢˜ç›®æ˜¯é…±ç´«çš„ï¼š

```javascript
/**
 * lazyMan.eat('Breakfest').sleep(4).eat('Launch').sleep(5).eat('Dinner')
 * ä»£ç æ‰§è¡Œåè¾“å‡º
 * my name is pig
 * I ate Breakfest
 * ç­‰å¾… 4 s
 * I ate Launch
 * ç­‰å¾… 5 s
 * I ate Dinner
 */

```

#### ç¬¬ä¸€æ­¥ åˆ†æåŠŸèƒ½

- é¦–å…ˆï¼Œ`layman` è¿™å®¶ä¼™æœ‰ `eat` `sleep` ä¸¤ä¸ªåŸºæœ¬æ–¹æ³•ï¼Œå¹¶ä¸”è¿™ä¸¤ä¸ªæ–¹æ³•éƒ½æ˜¯æ”¯æŒé“¾å¼è°ƒç”¨çš„ã€‚
- å…¶æ¬¡, `lazyMan` çš„ `sleep` æ–¹æ³•å…·æœ‰å»¶æ—¶æ•ˆæœ

#### ç¬¬äºŒæ­¥ æ•´ç†æ€è·¯ 

- é¦–å…ˆ `lazyMan` æœ‰`sleep` `eat`è¿™äº›æ–¹æ³•ï¼ŒåŸºäºé¢å‘å¯¹è±¡çš„æ€æƒ³ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸ªç±»å»å®ç°å®ƒã€‚
- å…¶æ¬¡ï¼Œè¿™ä¸ªå®¶ä¼™æ¯æ¬¡åªèƒ½åšä¸€ä»¶äº‹æƒ…ï¼Œæˆ‘ä»¬å°±ç”¨ä¸€ä¸ªé˜Ÿåˆ—å»æ¥æ”¶ä»–è¦åšçš„äº‹æƒ…ï¼Œè‡³äºè¿™ä¸ªé˜Ÿåˆ—ï¼Œæˆ‘ä»¬å¯ä»¥æ”¾åœ¨æ•°ç»„ä¸­ã€‚
- ç„¶åï¼Œ`sleep` å…·æœ‰å»¶æ—¶æ•ˆæœï¼Œæˆ‘ä»¬è¦ä½¿ç”¨å»¶æ—¶å™¨

#### ç¬¬ä¸‰æ­¥ åŸºç¡€ä»£ç 

```javascript
class LazyMan {
  constructor(name) {
    // è™½ç„¶ lazyMan å¾ˆæ‡’ï¼Œä½†æˆ‘ä»¬ä¾ç„¶ç»™ä»–ä¸€ä¸ªåå­—
    this.name = name 
    // æˆ‘ä»¬æŠŠ lazyMan è¦åšçš„äº‹æƒ…æ”¾åœ¨ä¸€ä¸ªæ•°ç»„é‡Œ
    this.queue = []
  }
  /**
   * eat
   * @param { String } what
   * @return {*} 
   * @memberof LazyMan
   */
  eat(what) {
    // è¿”å› this å®ç°é“¾å¼è°ƒç”¨
    return this
  }
  /**
   * sleep
   * @param { Number } hours
   * @return {*} 
   * @memberof LazyMan
   */
  sleep(hours) {
    // åŒæ ·è¿”å› this å®ç°é“¾å¼è°ƒç”¨
    return this
  }
}
```

è¿™æ ·ä¸€ä¸ªåŸºæœ¬çš„æ–¹æ³•å’Œå±æ€§å°±éƒ½æœ‰äº†ï¼Œæ¥ä¸‹æ¥å°±è¦è€ƒè™‘æ€ä¹ˆå»å®ç°ä»–çš„é˜Ÿåˆ—æ–¹æ³•äº†ã€‚æƒ³äº†å¾ˆä¹…è¿˜æ˜¯æ²¡æœ‰æƒ³åˆ°ï¼Œæ²¡å‡ºæ¯çš„æˆ‘å°±å»çœ‹åˆ«äººçš„ä»£ç äº†ï¼Œ >_< ã€‚ï¼ˆæ²¡åŠæ³•ï¼Œèƒ½åŠ›æœ‰é™å•Šï¼Œé è‡ªå·±ä¸èƒ½åšåˆ°ï¼Œå°±è¦å€Ÿå·¨äººçš„è‚©è†€ç”¨ä¸€ä¸‹äº†ï¼‰ç„¶åï¼ŒçœŸé¦™ï¼å¥½äº†ï¼Œçœ‹æ¥å¾ˆå¤šå¤§ç¥çš„è®²è§£ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ç”¨è‡ªå·±çš„è¯å¤è¿°ä¸€ä¸‹ï¼š

æ—¢ç„¶ `eat` `sleep` éƒ½æ˜¯è¡Œä¸ºï¼Œæˆ‘ä»¬å°±ç”¨å‡½æ•°ç»™ä»–åŒ…è£¹èµ·æ¥ï¼Œå¹¶æŠŠä»–ä»¬æ”¾åˆ°é˜Ÿåˆ—é‡Œã€‚ç„¶ååœ¨å°è£…ä¸€ä¸ª `next` æ–¹æ³•ï¼Œä»é˜Ÿåˆ—é‡Œé¢ï¼ŒæŠŠè¡Œä¸ºæ‹¿å‡ºæ¥ï¼Œæ‰§è¡Œä¸€ä¸‹ã€‚å¹¶ä¸”åœ¨å‡½æ•°æ‰§è¡Œå®Œæˆåå†è°ƒç”¨ä¸€ä¸‹è¿™ä¸ª`next` æ–¹æ³•ï¼Œå°±èƒ½å®Œæˆé˜Ÿåˆ—é‡Œçš„æ‰€æœ‰è¡Œä¸ºäº†ï¼Œ`ok` ï¼å¼€å¹²ï¼

```javascript
 ...
 /**
   * next
   * @memberof LazyMan
   */
  // å…ˆå°è£…ä¸€ä¸ª next æ–¹æ³•
  next() {
    // æŠŠè¦æ‰§è¡Œçš„è¡Œä¸ºæŠ½å‡ºæ¥ï¼Œå¹¶ä¸”æ‰§è¡Œä¸€ä¸‹
    const fn = this.queue.shift()
    fn && fn()
  }
  ...
```

æ¥ä¸‹æ¥ï¼Œå°±æ˜¯æŠŠè¡Œä¸ºä¸€ä¸ªä¸ªæ”¾è¿›å»äº†

```javascript
  ...
  /**
   * eat
   * @param { String } what
   * @return {*} 
   * @memberof LazyMan
   */
  eat(what) {
    // eat æ˜¯ä¸€ä¸ªè¡Œä¸º æˆ‘ä»¬ç”¨å‡½æ•°æŠŠå®ƒåŒ…è£¹èµ·æ¥
    let fn = (() => {
      // ç”¨ä¸€ä¸ªé—­åŒ…æŠŠåƒäº†ä»€ä¹ˆè®°å½•ä¸‹æ¥
      return () => {
        console.log(`I ate ${what} !`)
        // è¡Œä¸ºå®Œæˆï¼Œè°ƒç”¨ next æ–¹æ³•ï¼Œæ‰§è¡Œä¸‹ä¸€ä¸ªè¡Œä¸º
        this.next()
      }
    })(what)
    this.queue.push(fn)
    // è¿”å› this å®ç°é“¾å¼è°ƒç”¨
    return this
  }
  /**
   * sleep
   * @param { Number } hours
   * @return {*} 
   * @memberof LazyMan
   */
  sleep(hours) {
    const _this = this
    let fn = (function () {
      return function () {
        setTimeout(function () {
          console.log(`I slept ${hours} hours ... ...`)
          // åŒæ ·åœ°ï¼Œè¡Œä¸ºå®Œæˆï¼Œè°ƒç”¨ next æ–¹æ³•ï¼Œæ‰§è¡Œä¸‹ä¸€ä¸ªè¡Œä¸º
          _this.next()
        }, hours * 1000)
      }
    })(hours)
    // åŒæ ·åœ°ï¼ŒæŠŠ sleep è¡Œä¸ºæ”¾åˆ°é˜Ÿåˆ—é‡Œ
    this.queue.push(fn)
    // åŒæ ·è¿”å› this å®ç°é“¾å¼è°ƒç”¨
    return this
  }
  ...
```

ç„¶åï¼Œå°±æ˜¯è¿™ä¸ªé˜Ÿåˆ—è¦æ€ä¹ˆæ‰§è¡Œçš„é—®é¢˜äº†

```javascript
  ...  
  constructor(name) {
   ...
    // ç¬¬ä¸€ä¸ªè¡Œä¸º
    const fn = (() => {
      return () => {
        console.log(`My name is ${name}`)
        // å¼€å§‹æ‰§è¡Œç¬¬äºŒä¸ªè¡Œä¸º
        this.next()
      }
    })()
    this.queue.push(fn)
    // ç­‰å®ä¾‹åŒ–å®Œæˆå¼€å§‹æ‰§è¡Œé˜Ÿåˆ—ä»»åŠ¡
    setTimeout(() => {
      this.next()
    }, 0)
  }
  ...
```

æ‰§è¡Œä¸€ä¸‹

```javascript
const lazyman = new LazyMan('Pikky').eat('Breakfest')
lazyman.sleep(4)
lazyman.eat('Launch')
lazyman.sleep(5)
lazyman.eat('Dinner')
lazyman.sleep(8)

// My name is Pikky
// I ate Breakfest !
// I slept 4 hours ... ...
// I ate Launch !
// I slept 5 hours ... ...
// I ate Dinner !
// I slept 8 hours ... ...
// å®Œç¾ğŸ‘ğŸ‘ğŸ‘
```

#### æ€»ç»“

å…¶å®è¿™é“é¢˜è€ƒçš„æ˜¯ä¸€ä¸ªé˜Ÿåˆ—çš„æ˜¯å®ç°ï¼Œä»¥åŠé“¾å¼è°ƒç”¨çš„å®ç°ã€‚å­¦æµ·æ— æ¶¯ï¼Œä¹¦å±±æœ‰è·¯ã€‚æ¯å¤©ä¸€å°æ­¥ï¼Œæ€»æ˜¯åœ¨è¿›æ­¥ã€‚è€¶ï¼

æœ€åï¼Œè´´ä¸€ä¸‹å®Œæ•´ä»£ç 

```javascript
class LazyMan {
  constructor(name) {
    // è™½ç„¶ lazyMan å¾ˆæ‡’ï¼Œä½†æˆ‘ä»¬ä¾ç„¶ç»™ä»–ä¸€ä¸ªåå­—
    this.name = name
    // æˆ‘ä»¬æŠŠ lazyMan è¦åšçš„äº‹æƒ…æ”¾åœ¨ä¸€ä¸ªæ•°ç»„é‡Œ
    this.queue = []
    // ç¬¬ä¸€ä¸ªè¡Œä¸º
    const fn = (() => {
      return () => {
        console.log(`My name is ${name}`)
        // å¼€å§‹æ‰§è¡Œç¬¬äºŒä¸ªè¡Œä¸º
        this.next()
      }
    })()
    this.queue.push(fn)
    // ç­‰å®ä¾‹åŒ–å®Œæˆå¼€å§‹æ‰§è¡Œé˜Ÿåˆ—ä»»åŠ¡
    setTimeout(() => {
      this.next()
    }, 0)
  }
  /**
   * next
   * @memberof LazyMan
   */
  next() {
    // æŠŠè¦æ‰§è¡Œçš„è¡Œä¸ºæŠ½å‡ºæ¥ï¼Œå¹¶ä¸”æ‰§è¡Œä¸€ä¸‹
    const fn = this.queue.shift()
    fn && fn()
  }
  /**
   * eat
   * @param { String } what
   * @return {*} 
   * @memberof LazyMan
   */
  eat(what) {
    // è¿”å› this å®ç°é“¾å¼è°ƒç”¨
    // eat æ˜¯ä¸€ä¸ªè¡Œä¸º æˆ‘ä»¬ç”¨å‡½æ•°æŠŠå®ƒåŒ…è£¹èµ·æ¥
    let fn = (() => {
      // ç”¨ä¸€ä¸ªé—­åŒ…æŠŠåƒäº†ä»€ä¹ˆè®°å½•ä¸‹æ¥
      return () => {
        console.log(`I ate ${what} !`)
        // è¡Œä¸ºå®Œæˆï¼Œè°ƒç”¨ next æ–¹æ³•ï¼Œæ‰§è¡Œä¸‹ä¸€ä¸ªè¡Œä¸º
        this.next()
      }
    })(what)
    this.queue.push(fn)
    return this
  }
  /**
   * sleep
   * @param { Number } hours
   * @return {*} 
   * @memberof LazyMan
   */
  sleep(hours) {
    // åŒæ ·åœ°ï¼ŒæŠŠ sleep è¡Œä¸ºæ”¾åˆ°é˜Ÿåˆ—é‡Œ
    const _this = this
    let fn = (function () {
      return function () {
        setTimeout(function () {
          console.log(`I slept ${hours} hours ... ...`)
          // åŒæ ·åœ°ï¼Œè¡Œä¸ºå®Œæˆï¼Œè°ƒç”¨ next æ–¹æ³•ï¼Œæ‰§è¡Œä¸‹ä¸€ä¸ªè¡Œä¸º
          _this.next()
        }, hours * 1000)
      }
    })(hours)
    this.queue.push(fn)
    // åŒæ ·è¿”å› this å®ç°é“¾å¼è°ƒç”¨
    return this
  }
}
```

